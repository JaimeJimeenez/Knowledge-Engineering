{"ast":null,"code":"export class Attribute {\n  constructor(name, table) {\n    this._positives = new Map();\n    this._values = new Map();\n    this._merit = 0;\n    this._name = name;\n    this._numberExamples = table.examples.length;\n    this._calculatePositivesNegatives(table);\n    this._calculateMerit();\n  }\n  _calculatePositivesNegatives(table) {\n    for (let i = 0; i < table.examples.length; i++) {\n      const example = table.examples[i];\n      const value = example.getValue(this.name);\n      if (this._values.has(value)) {\n        this._values.set(value, this._values.get(value) + 1);\n        if (example.getValue(table.resultName) === 'si') this._positives.set(value, this._positives.get(value) + 1);\n      } else {\n        this._values.set(value, 1);\n        if (example.getValue(table.resultName) === 'si') this._positives.set(value, 1);else this._positives.set(value, 0);\n      }\n    }\n  }\n  _info(p, n) {\n    if (p === 0) {\n      if (n !== 0) return -n * (Math.log(n) / Math.log(2));else return 0;\n    }\n    if (n !== 0) return -p * (Math.log(p) / Math.log(2)) - n * (Math.log(n) / Math.log(2));\n    return -p * (Math.log(p) / Math.log(2));\n  }\n  _calculateMerit() {\n    this._merit = 0;\n    let r = 0;\n    let n = 0;\n    for (const value of Object.keys(this._values)) {\n      r = this._values.get(value) / this._numberExamples;\n      n = this._values.get(value) - this._positives.get(value);\n      this._merit += r * this._info(this._positives.get(value) / this._values.get(value), n / this._values.get(value));\n    }\n  }\n  get name() {\n    return this._name;\n  }\n  get merit() {\n    return this._merit;\n  }\n  get values() {\n    return this._values;\n  }\n}","map":{"version":3,"names":["Attribute","constructor","name","table","_positives","Map","_values","_merit","_name","_numberExamples","examples","length","_calculatePositivesNegatives","_calculateMerit","i","example","value","getValue","has","set","get","resultName","_info","p","n","Math","log","r","Object","keys","merit","values"],"sources":["/Users/jimmyjimenez/Desktop/University/IngenieriÌa del Conocimiento/Knowledge-Engineering/ID3/ID3/src/app/lib/attribute.ts"],"sourcesContent":["import { Dataset } from \"./dataset\";\nimport { Example } from \"./example\";\n\nexport class Attribute {\n\n  private _name : string;\n  private _positives : Map<string, number> =  new Map<string, number>();\n  private _values : Map<string, number> = new Map<string, number>();\n  private _numberExamples : number;\n  private _merit : number = 0;\n\n  constructor(name : string, table : Dataset) {\n    this._name = name;\n    this._numberExamples = table.examples!.length;\n    this._calculatePositivesNegatives(table);\n    this._calculateMerit();\n  }\n\n  private _calculatePositivesNegatives(table : Dataset) {\n    for (let i = 0; i < table.examples!.length; i++) {\n      const example : Example = table.examples![i];\n      const value : string = example.getValue(this.name);\n      if (this._values.has(value!)) {\n        this._values.set(value!, this._values.get(value!)! + 1 );\n        if (example.getValue(table.resultName) === 'si')\n          this._positives.set(value!, this._positives.get(value!)! + 1);\n      }\n      else {\n        this._values.set(value!, 1);\n        if (example.getValue(table.resultName) === 'si')\n          this._positives.set(value!, 1);\n        else\n          this._positives.set(value!, 0);\n      }\n    }\n  }\n\n  private _info(p : number, n : number) {\n    if (p === 0) {\n      if (n !== 0)\n        return -n * (Math.log(n) / Math.log(2));\n      else\n        return 0;\n    }\n    if (n !== 0)\n      return -p * (Math.log(p) / Math.log(2)) - n * (Math.log(n) / Math.log(2));\n    return -p * (Math.log(p) / Math.log(2));\n  }\n\n  private _calculateMerit() {\n    this._merit = 0;\n    let r = 0;\n    let n = 0;\n    for (const value of Object.keys(this._values)) {\n        r = this._values.get(value)! / this._numberExamples;\n        n = this._values.get(value)! - this._positives.get(value)!;\n        this._merit += r * this._info(this._positives.get(value)! / this._values.get(value)!, n / this._values.get(value)!);\n    }\n  }\n\n  get name() : string {\n    return this._name;\n  }\n\n  get merit() : number {\n    return this._merit;\n  }\n\n  get values() : Map<string, number> {\n    return this._values;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}